<div
	layout:decorate="~{layouts/main :: layout(sidebar='nutri', title='Healtry - Nutricionista:Alimentos')}"
	layout:fragment="contenido">

	<script th:src="@{/js/nutri/alimentos.js}"></script>

	<div class="container mt-4" x-init="init()" x-data="alimentosApp()">
		<div class="d-flex justify-content-between align-items-center mb-3">
			<h3 class="fw-semibold">Administración de Alimentos</h3>
		</div>

		<div class="row mb-3">
			<div class="col-md-4">
				<div class="input-group">
					<span class="input-group-text"><i class="bi bi-search"></i></span>
					<input type="text" class="form-control"
						placeholder="Buscar alimento..." x-model="filtro">
				</div>
			</div>

			<div class="col-md-8 d-flex justify-content-end">
				<button class="btn btn-success" @click="abrirModalNuevo()">
					<i class="bi bi-plus-circle me-1"></i> Nuevo Alimento
				</button>
			</div>
		</div>
		<!-- Tabla -->
		<div class="table-responsive">
			<table class="table table-bordered align-middle">
				<thead class="main-color-light">
					<tr>
						<th>Nombre</th>
						<th>Proteínas (g)</th>
						<th>Grasas (g)</th>
						<th>Carbohidratos (g)</th>
						<th style="width: 120px">Acciones</th>
					</tr>
				</thead>
				<tbody>
					<template x-for="alim in alimentosFiltrados()" :key="alim.id">
					<tr>
						<td x-text="alim.nombre"></td>
						<td x-text="alim.proteinas"></td>
						<td x-text="alim.grasas"></td>
						<td x-text="alim.carbohidratos"></td>
						<td class="text-center">
							<div class="btn-group" role="group">
								<button class="btn btn-sm btn-primary me-1"
									@click="abrirModalEditar(alim)">
									<i class="bi bi-pencil"></i>
								</button>
								<button class="btn btn-sm btn-danger"
									@click="confirmarEliminar(alim)">
									<i class="bi bi-trash"></i>
								</button>
							</div>
						</td>
					</tr>
					</template>
					<tr x-show="alimentos.length === 0">
						<td colspan="7" class="text-center text-muted">No hay
							alimentos registrados.</td>
					</tr>
				</tbody>
			</table>
		</div>

		<!-- Modales -->
		<div th:replace="~{nutri/modales/modales-alimentos}"></div>
	</div>
</div>