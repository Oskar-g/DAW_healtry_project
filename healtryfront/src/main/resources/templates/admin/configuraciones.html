<div layout:decorate="~{layouts/main :: layout(sidebar='admin')}" 
   layout:fragment="contenido">
   <script th:src="@{/js/admin/configuraciones.js}"></script>
   <div class="container mt-4" x-init="init()" x-data="parametrosApp()" >
      <div class="d-flex justify-content-between align-items-center mb-3">
         <h3 class="fw-semibold">Administración de Parámetros</h3>
         <button class="btn btn-success" @click="abrirModalNuevo()">
         <i class="bi bi-plus-circle me-1"></i> Nuevo parámetro
         </button>
      </div>
      <!-- Tabla -->
      <div class="table-responsive">
         <table class="table table-bordered align-middle">
            <thead class="main-color-light">
               <tr>
                  <th>Clave</th>
                  <th>Valor</th>
                  <th>Tipo</th>
                  <th>Descripción</th>
                  <th style="width: 120px">Acciones</th>
               </tr>
            </thead>
            <tbody>
               <template x-for="p in parametros" :key="p.clave">
                  <tr>
                     <td x-text="p.clave"></td>
                     <td x-text="p.valor"></td>
                     <td x-text="p.tipo"></td>
                     <td x-text="p.descripcion"></td>
                     <td class="text-center">
                        <button
                           class="btn btn-sm btn-primary me-1"
                           @click="abrirModalEditar(p)"
                           >
                        <i class="bi bi-pencil"></i>
                        </button>
                        <button
                           class="btn btn-sm btn-danger"
                           @click="confirmarEliminar(p)"
                           >
                        <i class="bi bi-trash"></i>
                        </button>
                     </td>
                  </tr>
               </template>
               <tr x-show="parametros.length === 0">
                  <td colspan="5" class="text-center text-muted">
                     No hay parámetros registrados.
                  </td>
               </tr>
            </tbody>
         </table>
      </div>
      <!-- Modales -->
      <div th:replace="~{fragments/modales-configuraciones}"></div>
   </div>
</div>