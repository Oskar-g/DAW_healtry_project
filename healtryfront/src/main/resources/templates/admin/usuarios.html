<div layout:decorate="~{layouts/main :: layout(sidebar='admin')}" layout:fragment="contenido">
	<script th:src="@{/js/admin/usuarios.js}"></script>
	<div class="container mt-4" x-init="init()" x-data="usuariosApp()">
		<div class="d-flex justify-content-between align-items-center mb-3">
			<h3 class="fw-semibold">Administraci√≥n de Usuarios</h3>
			<button class="btn btn-success" @click="abrirModalNuevo()">
				<i class="bi bi-plus-circle me-1"></i> Nuevo Usuario
			</button>
		</div>
		<!-- Tabla -->
		<div class="table-responsive">
			<table class="table table-bordered align-middle">
				<thead class="main-color-light">
					<tr>
						<th>id</th>
						<th>nombre</th>
						<th>apellidos</th>
						<th>correo</th>
						<th>rol</th>
						<th style="width: 120px">Acciones</th>
					</tr>
				</thead>
				<tbody>
					<template x-for="u in usuarios" :key="u.id">
						<tr>
							<td x-text="u.id"></td>
							<td x-text="u.nombre"></td>
							<td x-text="u.apellidos"></td>
							<td x-text="u.correo"></td>
							<td x-text="u.rol.nombre"></td>
							<td class="text-center">
								<div class="btn-group" role="group">
									<button class="btn btn-sm me-1" :class="u.activo ? 'btn-success' : 'btn-warning'"
										@click="toggleActivo(u)"
										:title="u.activo ? 'Desactivar usuario' : 'Activar usuario'">
										<i :class="u.activo ? 'bi bi-person-check' : 'bi bi-person-x'"></i>
									</button>
									<button class="btn btn-sm btn-primary me-1" @click="abrirModalEditar(u)">
										<i class="bi bi-pencil"></i>
									</button>
									<button class="btn btn-sm btn-danger" @click="confirmarEliminar(u)">
										<i class="bi bi-trash"></i>
									</button>
								</div>
							</td>
						</tr>
					</template>
					<tr x-show="usuarios.length === 0">
						<td colspan="5" class="text-center text-muted">
							No hay usuarios registrados.
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- Modales -->
		<div th:replace="~{admin/modales/modales-usuarios}"></div>
	</div>
</div>